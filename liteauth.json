[{"object":"block","type":"heading_1","heading_1":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"BitAuth"}}]}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"Passwordless authentication using Bitcoin cryptography"}}]}},{"toggle":{"rich_text":[{"type":"text","text":{"content":"Overview","link":null},"annotations":{"bold":true}}],"color":"default","children":[{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"BitAuth is a way to do secure, passwordless authentication using the cryptography\nin Bitcoin. Instead of using a shared secret, the client signs each request using\na private key and the server checks to make sure the signature is valid and matches\nthe public key."}}]}}]}},{"toggle":{"rich_text":[{"type":"text","text":{"content":"Getting started","link":null},"annotations":{"bold":true}}],"color":"default","children":[{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"Install with Node.js:"}}]}},{"object":"block","type":"code","code":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"npm install bitauth"}}],"language":"bash"}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"To generate a browser bundle, you can then run:"}}]}},{"object":"block","type":"code","code":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"gulp browser"}}],"language":"bash"}}]}},{"toggle":{"rich_text":[{"type":"text","text":{"content":"Advantages over other authentication mechanisms","link":null},"annotations":{"bold":true}}],"color":"default","children":[{"object":"block","type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"By signing each request, man in the middle attacks are impossible."}}]}},{"object":"block","type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"A nonce is part of the data signed, which prevents replay attacks."}}]}},{"object":"block","type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"The cryptography in Bitcoin is rock solid and is securing billions"}}]}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"of dollars worth of bitcoins."}}]}},{"object":"block","type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"It uses elliptic curve cryptography which performs much better than RSA."}}]}},{"object":"block","type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"Because the private key is never revealed to the server, it does"}}]}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"not need to be exchanged between the server and client over a side channel like\nin HMAC."}}]}}]}},{"toggle":{"rich_text":[{"type":"text","text":{"content":"Technical Overview","link":null},"annotations":{"bold":true}}],"color":"default","children":[{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"BitAuth uses the same technology in Bitcoin. A public private key pair is created\nusing elliptic curve secp256k1. The public SIN (System identification number),\nlike a bitcoin address, is the RIPEMD 160, SHA256 hash of the public key.\nSee "}},{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"https://en.bitcoin.it/wiki/Identity_protocol_v1","link":{"type":"url","url":"https://en.bitcoin.it/wiki/Identity_protocol_v1"}}},{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":" for complete details."}}]}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"In each request, the client includes a nonce to prevent replay attacks. The client\nsigns the full url with the request body concatenated if there is one. The signature\nis included in the "}},{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":true,"color":"default"},"text":{"content":"x-signature"}},{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":" header and the public key is included in the\n"}},{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":true,"color":"default"},"text":{"content":"x-identity"}},{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":" header."}}]}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"The server verifies that the signature is valid and that it matches the identity (the public key).\nIt then computes the SIN from the public key, and sees whether that SIN has access\nto the requested resource. The nonce is checked to make sure it is higher than\nthe previously used nonce."}}]}}]}},{"toggle":{"rich_text":[{"type":"text","text":{"content":"Technology is readily available","link":null},"annotations":{"bold":true}}],"color":"default","children":[{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"With the growing popularity of Bitcoin, there are already libraries written in\nmany languages. Because BitAuth uses the same technology as Bitcoin, it is easy\nto start using BitAuth."}}]}}]}},{"toggle":{"rich_text":[{"type":"text","text":{"content":"Problems with password authentication","link":null},"annotations":{"bold":true}}],"color":"default","children":[{"object":"block","type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"Have to keep track of a separate password for every web service. People forget"}}]}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"passwords, encouraging them to reuse passwords and opening themselves up to\nhaving multiple services compromised."}}]}},{"object":"block","type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"Brute force attacks on weak passwords."}}]}},{"object":"block","type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"Passwords may travel over plaintext"}}]}},{"object":"block","type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"Passwords in databases being leaked"}}]}},{"object":"block","type":"bulleted_list_item","bulleted_list_item":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"Phishing attacks to steal passwords"}}]}}]}},{"toggle":{"rich_text":[{"type":"text","text":{"content":"Passwordless based authentication across web services","link":null},"annotations":{"bold":true}}],"color":"default","children":[{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"With BitAuth, users can use the same, strong password to encrypt their keys and\nnot worry about one service gaining access to another."}}]}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"In the future, an identity system could be built around BitAuth keys where a user\ncould create one key to represent an identity which could authenticate against\nmultiple services."}}]}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"In order for this to work, there would have to be a browser\nintegration or plugin which would manage these identities and a Javascript API\nwhere websites could sign requests going to their website with the private key,\nbut without exposing the private key to the third party sites."}}]}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"There also needs to be a public place to store SIN's, preferably in\na decentralized blockchain or datastore like namecoin. Key revocations could\nbe stored here as well as reviews/feedback to build a reputation around an\nidentity."}}]}}]}},{"toggle":{"rich_text":[{"type":"text","text":{"content":"Examples","link":null},"annotations":{"bold":true}}],"color":"default","children":[{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"Example server"}}]}},{"object":"block","type":"code","code":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"var express = require('express');\nvar bodyParser = require('body-parser');\nvar rawBody = require('../lib/middleware/rawbody');\nvar bitauth = require('../lib/middleware/bitauth');\n\nvar users = {\n  'Tf7UNQnxB8SccfoyZScQmb34V2GdEtQkzDz': {name: 'Alice'},\n  'Tf22EUFxHWh4wmA3sDuw151W5C5g32jgph2': {name: 'Bob'}\n};\n\nvar pizzas = [];\n\nvar app = express();\napp.use(rawBody);\napp.use(bodyParser());\n\n\napp.get('/user', bitauth, function(req, res) {\n  if(!req.sin || !users[req.sin]) return res.send(401, {error: 'Unauthorized'});\n  res.send(200, users[req.sin]);\n});\n\napp.post('/pizzas', bitauth, function(req, res) {\n  if(!req.sin || !users[req.sin]) return res.send(401, {error: 'Unauthorized'});\n  var pizza = req.body;\n  pizza.owner = users[req.sin].name;\n  pizzas.push(pizza);\n  res.send(200, req.body);\n});\n\napp.get('/pizzas', function(req, res) {\n  res.send(200, pizzas);\n});\n\napp.listen(3000);"}}],"language":"javascript"}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"Example client"}}]}},{"object":"block","type":"code","code":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"var request = require('request');\nvar bitauth = require('../lib/bitauth');\n\n// These can be generated with bitauth.generateSin()\nvar keys = {\n  alice: '38f93bdda21a5c4a7bae4eb75bb7811cbc3eb627176805c1009ff2099263c6ad',\n  bob: '09880c962437080d72f72c8c63a69efd65d086c9e7851a87b76373eb6ce9aab5'\n};\n\n// GET\n\nfor(k in keys) {\n  var url = 'http://localhost:3000/user';\n  var dataToSign = url;\n  var options = {\n    url: url,\n    headers: {\n      'x-identity': bitauth.getPublicKeyFromPrivateKey(keys[k]),\n      'x-signature': bitauth.sign(dataToSign, keys[k])\n    }\n  };\n\n  request.get(options, function(err, response, body) {\n    if(err) {\n      console.log(err);\n    }\n    if(body) {\n      console.log(body);\n    }\n  });\n}\n\nvar pizzas = ['pepperoni', 'sausage', 'veggie', 'hawaiian'];\n\n// POST\n\nfor(k in keys) {\n  var url = 'http://localhost:3000/pizzas';\n  var data = {type: pizzas[Math.floor(Math.random() * pizzas.length)]};\n  var dataToSign = url + JSON.stringify(data);\n  var options = {\n    url: url,\n    headers: {\n      'x-identity': bitauth.getPublicKeyFromPrivateKey(keys[k]),\n      'x-signature': bitauth.sign(dataToSign, keys[k])\n    },\n    json: data\n  };\n\n  request.post(options, function(err, response, body) {\n    if(err) {\n      console.log(err);\n    }\n    if(body) {\n      console.log(body);\n    }\n  });\n}\n"}}],"language":"javascript"}}]}},{"toggle":{"rich_text":[{"type":"text","text":{"content":"Middleware","link":null},"annotations":{"bold":true}}],"color":"default","children":[{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"BitAuth exposes a connect middleware for use in connect or ExpressJS applications.  Use:"}}]}},{"object":"block","type":"code","code":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"var bitauth = require('bitauth');\napp.use( bitauth.middleware );"}}],"language":"javascript"}}]}},{"toggle":{"rich_text":[{"type":"text","text":{"content":"Development","link":null},"annotations":{"bold":true}}],"color":"default","children":[{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"To build a browser compatible version of BitAuth, run the following command from the project's root directory:"}}]}},{"object":"block","type":"code","code":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"gulp browser"}}],"language":"bash"}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"This will output "}},{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":true,"color":"default"},"text":{"content":"bitauth.min.js"}},{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":" to project directory. The script can be loaded using "}},{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":true,"color":"default"},"text":{"content":"require('bitauth')"}},{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"."}}]}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"To then run tests for a web browser:"}}]}},{"object":"block","type":"code","code":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"gulp test:browser"}}],"language":"bash"}},{"object":"block","type":"paragraph","paragraph":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"To run tests for Node.js:"}}]}},{"object":"block","type":"code","code":{"rich_text":[{"type":"text","annotations":{"bold":false,"strikethrough":false,"underline":false,"italic":false,"code":false,"color":"default"},"text":{"content":"gulp test:node"}}],"language":"bash"}}]}}]